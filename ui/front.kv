ScreenManager:
    LoginScreen:
    MainScreen:
    VehicleScreen:
    InsuranceScreen:
    PriceScreen:

<LoginScreen>:
    name: "login"

    MDCard:
        size_hint: None, None
        width: min(400, root.width * 0.5)
        height: min(450, root.height * 0.6)
        pos_hint: {"center_x": 0.5, "center_y": 0.4}
        elevation: 10
        padding:[dp(25), min(dp(25), self.height * 0.05)]
        spacing: min(dp(25), self.height * 0.05)

        orientation: 'vertical'
    
        MDLabel:
            id: welcome_label
            font_style: "Display"
            role: "small"
            text: "WELCOME"
            bold: True
            halign: 'center'
            size_hint_y: None
            size_hint_x: None
            width: self.parent.width - dp(50)
            height: self.parent.height -  dp(350)  # Adjust the height to stay within the card
             
            
        Widget:
            size_hint_y: None
            height: min(dp(10), self.parent.height * 0.01)    

        MDTextField:
            id: user  
            size_hint_x: None
            size_hint_y: None
            height: self.parent.height *0.1
            width: self.parent.width -dp(100)
            font_size: "18sp"
            pos_hint: {"center_x": 0.5}
                  
            
            MDTextFieldHintText:
                text: "Username"

            MDTextFieldTrailingIcon:
                icon: "account"
        
        Widget:
            size_hint_y: None
            height: dp(5)

        MDTextField:
            id: password  
            size_hint_x: None
            width: self.parent.width -dp(100)
            font_size: "18sp"
            pos_hint: {"center_x": 0.5}
            password: True     
            
            MDTextFieldHintText:
                text: "Password"

            MDTextFieldTrailingIcon:
                icon: "eye-off"

        MDButton:
            style: "filled"
            pos_hint: {"center_x": 0.5}
            width: self.parent.width - dp(200)
            on_release: app.root.get_screen('login').user_authentication(self)

            MDButtonText:
                text: "LOG IN"
                pos_hint: {"center_x": 0.5, "center_y": 0.5}

        Widget:
            size_hint_y: None
            height: dp(10)

        
            


    



<MainScreen>
    name: "main"

    BoxLayout:
        orientation: 'vertical'
        padding: 20
        spacing: 10
        size_hint: 1,1

        MDCard:
            
            size_hint: 0.9, None
            padding:20
            spacing:30
            pos_hint: {"center_x": 0.5, "center_y": 0.6}
            height: self.parent.height-dp(150)


            BoxLayout:
                id:card
                orientation: 'vertical'
                padding: 20
                spacing: 20

                MDLabel:
                    font_style: "Headline"
                    role: "small"
                    text: "Please fill in the client's information:"
                    bold: True
                    font_size: '18sp'
                    halign: 'center'
                    size_hint_y: None
                    size_hint_x: None
                    width: self.parent.width - dp(50)
                    height: card.parent.height -  dp(450)

                MDGridLayout:
                    id: grid
                    cols: 2
                    size_hint: 1, None
                    adaptive_height: True
                    padding: [10, 40]  # padding: [horizontal, vertical]
                    spacing: [20, 40]  # Increase vertical spacing
                
                    pos_hint: {'center_x': 0.5, "center_y": 0.45}
                    
                    MDTextField:
                        id: dob
                        on_focus: root.on_text_field_focus(self, self.focus)
                        size_hint_x: None
                        mode: "outlined"
                        width: grid.width/2 - dp(20)
                        MDTextFieldHintText:
                            text: "Date of Birth"

                        MDTextFieldTrailingIcon:
                            icon: "calendar"
                        
                        MDTextFieldHelperText:
                            text: "MM/DD/YYYY"
                            mode: "persistent"
                    
                        
                        
                    
                    MDTextField:
                        id: licence_issue_date_field
                        on_focus: root.on_text_field_focus(self, self.focus)  
                        size_hint_x: None
                        mode: "outlined"
                        width: grid.width/2 - dp(20)
                        MDTextFieldHintText:
                            text: "Licence Issue Date"

                        MDTextFieldTrailingIcon:
                            icon: "calendar"
                        
                        MDTextFieldHelperText:
                            text: "MM/DD/YYYY"
                            mode: "persistent"

                    MDTextField:
                        id: area_field
                        size_hint_x: None
                        mode: "outlined"
                        width: grid.width/2 - dp(20)
                        on_focus: if self.focus: app.root.get_screen('main').on_dropdown_focus(self, self.focus)

                        MDTextFieldHintText:
                            text: "Area"

                        MDTextFieldTrailingIcon:
                            icon: "map-marker"

                    MDTextField:
                        id: seniority
                        size_hint_x: None
                        mode: "outlined"
                        width: grid.width/2 - dp(20)
                        MDTextFieldHintText:
                            text: "Seniority"
                Widget:
                    size_hint_y: None
                    height: dp(5)

                BoxLayout:
                    orientation: 'horizontal'
                    size_hint_y: None
                    height: dp(50)  # Adjust the height as needed to fit the card
                    spacing: 40
                    padding: 40
                    pos_hint: {'center_x': 0.65, "center_y": 0.5}
                    MDButton:
                        style: "filled"
                        size_hint_x: None
                        width: grid.width / 2 - dp(150)
                        on_release:
                            app.root.current = "login"
                            root.manager.transition.direction = "right"

                        MDButtonText:
                            text: "GO BACK"
                            pos_hint: {"center_x": 0.5, "center_y": 0.5}

                    MDButton:
                        style: "filled"
                        size_hint_x: None
                        width: grid.width / 2 - dp(150)
                        on_release:
                            app.root.current = "vehicle"
                            root.manager.transition.direction = "left"

                        MDButtonText:
                            text: "NEXT"
                            pos_hint: {"center_x": 0.5, "center_y": 0.5}
                    
                Widget:
                    size_hint_y: None
                    height: dp(5)

                


<VehicleScreen>
    name: "vehicle"

    BoxLayout:
        orientation: 'vertical'
        padding: 20
        spacing: 10
        size_hint: 1,1

        MDCard:
            
            size_hint: 0.9, None
            padding:20
            spacing:30
            pos_hint: {"center_x": 0.5, "center_y": 0.6}
            height: self.parent.height-dp(150)


            BoxLayout:
                id:card
                orientation: 'vertical'
                padding: 20
                spacing: 20


                MDLabel:
                    font_style: "Headline"
                    role: "small"
                    text: "Please fill in the vehicle's information:"
                    bold: True
                    font_size: '18sp'
                    halign: 'center'
                    size_hint_y: None
                    size_hint_x: None
                    width: self.parent.width - dp(50)
                    height: card.parent.height -  dp(500)

                MDGridLayout:
                    id: grid
                    cols: 3
                    size_hint: 1, None
                    adaptive_height: True
                    padding: [10, 40]  # padding: [horizontal, vertical]
                    spacing: [20, 40]  # Increase vertical spacing
                
                    pos_hint: {'center_x': 0.5, "center_y": 0.45}
                
                    MDTextField:
                        id: type_field
                        size_hint_x: None
                        mode: "outlined"
                        width: grid.width/3 - dp(20)
                        on_focus: if self.focus: app.root.get_screen('vehicle').on_dropdown_focus(self, self.focus)

                        MDTextFieldHintText:
                            text: "Type of vehicle"

                        MDTextFieldTrailingIcon:
                            icon: "car"

                    MDTextField:
                        id: fuel_field
                        size_hint_x: None
                        mode: "outlined"
                        width: grid.width/3 - dp(20)
                        on_focus: if self.focus: app.root.get_screen('vehicle').on_dropdown_focus(self, self.focus)

                        MDTextFieldHintText:
                            text: "Type of fuel"

                        MDTextFieldTrailingIcon:
                            icon: "gas-station"
                    
                    MDTextField:
                        id: registration
                        size_hint_x: None
                        mode: "outlined"
                        width: grid.width/3 - dp(20)
                        MDTextFieldHintText:
                            text: "Registration Year"

                        MDTextFieldTrailingIcon:
                            icon: "calendar"
                        
                        MDTextFieldHelperText:
                            text: "YYYY"
                            mode: "persistent"

                    MDTextField:
                        id: driver
                        size_hint_x: None
                        mode: "outlined"
                        width: grid.width/3 - dp(20)
                        on_focus: if self.focus: app.root.get_screen('vehicle').on_dropdown_focus(self, self.focus)

                        MDTextFieldHintText:
                            text: "Second driver"

                        MDTextFieldTrailingIcon:
                            icon: "account"

                    MDTextField:
                        id: power
                        size_hint_x: None
                        mode: "outlined"
                        width: grid.width/3 - dp(20)
                        MDTextFieldHintText:
                            text: "Horse Power"

                        
                    MDTextField:
                        id: cylinder
                        size_hint_x: None
                        mode: "outlined"
                        width: grid.width/3 - dp(20)
                        MDTextFieldHintText:
                            text: "Cylinder Capacity"

                    

                    MDTextField:
                        id: weight
                        size_hint_x: None
                        mode: "outlined"
                        width: grid.width/3 - dp(20)
                        MDTextFieldHintText:
                            text: "Weight"

                        MDTextFieldTrailingIcon:
                            icon: "weight-kilogram"

                    MDTextField:
                        id: length
                        size_hint_x: None
                        mode: "outlined"
                        width: grid.width/3 - dp(20)
                        MDTextFieldHintText:
                            text: "Length"

                        
                    
                    
                    MDTextField:
                        id: value
                        size_hint_x: None
                        mode: "outlined"
                        width: grid.width/3 - dp(20)
                        MDTextFieldHintText:
                            text: "Value"
                        MDTextFieldTrailingIcon:
                            icon: "cash"
                
                BoxLayout:
                    orientation: 'horizontal'
                    size_hint_y: None
                    height: dp(50)  # Adjust the height as needed to fit the card
                    spacing: 40
                    padding: 40
                    pos_hint: {'center_x': 0.65, "center_y": 0.5}
                    MDButton:
                        style: "filled"
                        size_hint_x: None
                        width: grid.width / 2 - dp(150)
                        on_release:
                            app.root.current = "main"
                            root.manager.transition.direction = "right"

                        MDButtonText:
                            text: "GO BACK"
                            pos_hint: {"center_x": 0.5, "center_y": 0.5}

                    MDButton:
                        style: "filled"
                        size_hint_x: None
                        width: grid.width / 2 - dp(150)
                        on_release:
                            app.root.current = "insurance"
                            root.manager.transition.direction = "left"

                        MDButtonText:
                            text: "NEXT"
                            pos_hint: {"center_x": 0.5, "center_y": 0.5}
                    
                
                

                        
<InsuranceScreen>
    name: "insurance"

    BoxLayout:
        orientation: 'vertical'
        padding: 20
        spacing: 10
        size_hint: 1,1

        MDCard:
            
            size_hint: 0.9, None
            padding:20
            spacing:30
            pos_hint: {"center_x": 0.5, "center_y": 0.6}
            height: self.parent.height-dp(150)


            BoxLayout:
                id:card
                orientation: 'vertical'
                padding: 20
                spacing: 20

                MDLabel:
                    font_style: "Headline"
                    role: "small"
                    text: "Please fill in the contract information:"
                    bold: True
                    font_size: '18sp'
                    halign: 'center'
                    size_hint_y: None
                    size_hint_x: 1
                    #width: self.parent.width - dp(50)
                    height: card.parent.height -  dp(500)

                MDGridLayout:
                    id: grid
                    cols: 3
                    size_hint: 1, None
                    adaptive_height: True
                    padding: [10, 30]  # padding: [horizontal, vertical]
                    spacing: [20, 30]  # Increase vertical spacing
                
                    pos_hint: {'center_x': 0.5, "center_y": 0.45}
                
                    MDTextField:
                        id: start_contract
                        on_focus: root.on_text_field_focus(self, self.focus)
                        size_hint_x: None
                        mode: "outlined"
                        width: grid.width/3 - dp(20)
                        MDTextFieldHintText:
                            text: "Start Contract"

                        MDTextFieldTrailingIcon:
                            icon: "calendar"
                        
                        MDTextFieldHelperText:
                            text: "MM/DD/YYYY"
                            mode: "persistent"

                    MDTextField:
                        id: last_renewal
                        on_focus: root.on_text_field_focus(self, self.focus)  
                        size_hint_x: None
                        mode: "outlined"
                        width: grid.width/3 - dp(20)
                        MDTextFieldHintText:
                            text: "Last renewal"

                        MDTextFieldTrailingIcon:
                            icon: "calendar"
                        
                        MDTextFieldHelperText:
                            text: "MM/DD/YYYY"
                            mode: "persistent"
                    
                    MDTextField:
                        id: next_renewal
                        on_focus: root.on_text_field_focus(self, self.focus) 
                        size_hint_x: None
                        mode: "outlined"
                        width: grid.width/3 - dp(20)
                        MDTextFieldHintText:
                            text: "Next renewal"

                        MDTextFieldTrailingIcon:
                            icon: "calendar"
                        
                        MDTextFieldHelperText:
                            text: "MM/DD/YYYY"
                            mode: "persistent"

                    MDTextField:
                        id: channel
                        size_hint_x: None
                        mode: "outlined"
                        width: grid.width/3 - dp(20)
                        on_focus: if self.focus: app.root.get_screen('insurance').on_dropdown_focus(self, self.focus)

                        MDTextFieldHintText:
                            text: "Distribution Channel"

                        

                    MDTextField:
                        id: payment
                        size_hint_x: None
                        mode: "outlined"
                        width: grid.width/3 - dp(20)
                        on_focus: if self.focus: app.root.get_screen('insurance').on_dropdown_focus(self, self.focus)

                        MDTextFieldHintText:
                            text: "Payment"

                        MDTextFieldTrailingIcon:
                            icon: "cash"

                    MDTextField:
                        id: claims
                        size_hint_x: None
                        mode: "outlined"
                        width: grid.width/3 - dp(20)
                        
                        MDTextFieldHintText:
                            text: "Claims"

                        MDTextFieldTrailingIcon:
                            icon: "car"

                    MDTextField:
                        id: policies
                        size_hint_x: None
                        mode: "outlined"
                        width: grid.width/3 - dp(20)
                        
                        MDTextFieldHintText:
                            text: "Policies"

                        MDTextFieldTrailingIcon:
                            icon: "car"


                    MDTextField:
                        id: lapse
                        size_hint_x: None
                        mode: "outlined"
                        width: grid.width/3 - dp(20)
                        
                        MDTextFieldHintText:
                            text: "Lapse"

                        MDTextFieldTrailingIcon:
                            icon: "car"

                    MDTextField:
                        id: ratio_claims
                        size_hint_x: None
                        mode: "outlined"
                        width: grid.width/3 - dp(20)
                        
                        MDTextFieldHintText:
                            text: "Ratio claims"

                        MDTextFieldTrailingIcon:
                            icon: "car"
                
                BoxLayout:
                    orientation: 'horizontal'
                    size_hint_y: None
                    height: dp(60)  # Adjust the height as needed to fit the card
                    spacing: 40
                    padding: 40
                    pos_hint: {'center_x': 0.65, "center_y": 0.5}
                    MDButton:
                        style: "filled"
                        size_hint_x: None
                        width: grid.width / 2 - dp(150)
                        on_release:
                            app.root.current = "vehicle"
                            root.manager.transition.direction = "right"

                        MDButtonText:
                            text: "GO BACK"
                            pos_hint: {"center_x": 0.5, "center_y": 0.5}

                    MDButton:
                        style: "filled"
                        size_hint_x: None
                        width: grid.width / 2 - dp(150)
                        on_release:
                            app.get_all_data()
                            root.manager.transition.direction = "left"

                        MDButtonText:
                            text: "CALCULATE"
                            pos_hint: {"center_x": 0.5, "center_y": 0.5}                   
                
                
            

<PriceScreen>
    name: "price"

    BoxLayout:
        orientation: 'vertical'
        padding: 20
        spacing: 10
        size_hint: 1,1

        MDCard:
            
            size_hint: 0.9, None
            padding:20
            spacing:30
            pos_hint: {"center_x": 0.5, "center_y": 0.6}
            height: self.parent.height-dp(150)


            BoxLayout:
                orientation: 'vertical'
                size_hint_y: None
                height: self.minimum_height
                spacing: 20

                MDLabel:
                    text: "Suggested Premium"
                    font_style: "Display"
                    role: "small"  # Adjust the font style as needed for larger text
                    halign: "center"
                    size_hint_y: None
                    height: self.texture_size[1]
                    padding_y: dp(10)

                MDLabel:
                    id: premium
                    text: "$"
                    font_style: "Display"
                    role: "small"  # Adjust the font style as needed for larger text
                    halign: "center"
                    size_hint_y: None
                    height: self.texture_size[1]
                    padding_y: dp(10)
                Widget:
                    size_hint_y: None
                    height: dp(100)
                BoxLayout:
                    orientation: 'horizontal'
                    size_hint_y: None
                    height: dp(50)  # Adjust the height as needed to fit the card
                    spacing: 40
                    padding: 40
                    pos_hint: {'center_x': 0.65, "center_y": 0.3}
                    MDButton:
                        style: "filled"
                        size_hint_x: None
                        width: self.parent.width / 2 - dp(150)
                        on_release:
                            app.root.current = "vehicle"
                            root.manager.transition.direction = "right"

                        MDButtonText:
                            text: "GO BACK"
                            pos_hint: {"center_x": 0.5, "center_y": 0.5}

                    MDButton:
                        style: "filled"
                        size_hint_x: None
                        width: self.parent.width / 2 - dp(150)
                        on_release:
                            app.root.current = "login"
                            root.manager.transition.direction = "left"

                        MDButtonText:
                            text: "LOGOUT"
                            pos_hint: {"center_x": 0.5, "center_y": 0.5}
                    
                Widget:
                    size_hint_y: None
                    height: dp(5)
                

            
            
    